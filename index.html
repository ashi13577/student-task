<!DOCTYPE html>
<html>
<head>
            <style></style>
        <style type="text/css">.lf-progress {
  -webkit-appearance: none;
  -moz-apperance: none;
  width: 100%;
  /* margin: 0 10px; */
  height: 4px;
  border-radius: 3px;
  cursor: pointer;
}
.lf-progress:focus {
  outline: none;
  border: none;
}
.lf-progress::-moz-range-track {
  cursor: pointer;
  background: none;
  border: none;
  outline: none;
}
.lf-progress::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-moz-range-thumb {
  -moz-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-ms-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
.lf-progress::-ms-fill-lower {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-fill-upper {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-thumb {
  border: 0;
  height: 15px;
  width: 15px;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress:focus::-ms-fill-lower {
  background: #ccc;
}
.lf-progress:focus::-ms-fill-upper {
  background: #ccc;
}
.lf-player-container :focus {
  outline: 0;
}
.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  opacity: 1;
  visibility: visible;
  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-player-btn-container {
  display: flex;
  align-items: center;
}
.lf-player-btn {
  cursor: pointer;
  fill: #999;
  width: 14px;
}

.lf-player-btn.active {
  fill: #555;
}

.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  background-color: #ffffff;
  opacity: 1;

  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
  padding: 10px;
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-arrow {
  position: absolute;
  z-index: -1;
  content: '';
  bottom: -9px;
  border-style: solid;
  border-width: 10px 10px 0px 10px;
}

.lf-left-align,
.lf-left-align .lfarrow {
  left: 0;
  right: unset;
}

.lf-right-align,
.lf-right-align .lf-arrow {
  right: 0;
  left: unset;
}

.lf-text-input {
  border: 1px #ccc solid;
  border-radius: 5px;
  padding: 3px;
  width: 60px;
  margin: 0;
}

.lf-color-picker {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  height: 90px;
}

.lf-color-selectors {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.lf-color-component {
  display: flex;
  flex-direction: row;
  font-size: 12px;
  align-items: center;
  justify-content: center;
}

.lf-color-component strong {
  width: 40px;
}

.lf-color-component input[type='range'] {
  margin: 0 0 0 10px;
}

.lf-color-component input[type='number'] {
  width: 50px;
  margin: 0 0 0 10px;
}

.lf-color-preview {
  font-size: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding-left: 5px;
}

.lf-preview {
  height: 60px;
  width: 60px;
}

.lf-popover-snapshot {
  width: 150px;
}
.lf-popover-snapshot h5 {
  margin: 5px 0 10px 0;
  font-size: 0.75rem;
}
.lf-popover-snapshot a {
  display: block;
  text-decoration: none;
}
.lf-popover-snapshot a:before {
  content: '⥼';
  margin-right: 5px;
}
.lf-popover-snapshot .lf-note {
  display: block;
  margin-top: 10px;
  color: #999;
}
.lf-player-controls > div {
  margin-right: 5px;
  margin-left: 5px;
}
.lf-player-controls > div:first-child {
  margin-left: 0px;
}
.lf-player-controls > div:last-child {
  margin-right: 0px;
}
</style></head>
        <body data-new-gr-c-s-check-loaded="14.1237.0" data-gr-ext-installed="" data-new-gr-c-s-loaded="14.1237.0">
            


  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Assignment Tracker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /*────────────────────────────────────────────────────────────────────────
      Root Variables
    ────────────────────────────────────────────────────────────────────────*/
    :root {
      --primary: #4361ee;
      --primary-darker: #3a53c0;
      --primary-rgb: 67, 97, 238;

      --secondary: #3f37c9;
      --secondary-darker: #322ca0;
      --secondary-rgb: 63, 55, 201;

      --success: #4cc9f0;
      --success-darker: #3ab0d8;

      --accent: #f72585;
      --accent-rgb: 247, 37, 133;

      --light: #f8f9fa;
      --dark: #1c1e21;
      --gray: #5f6770;
      --light-gray: #e9ecef;
      --border: #ced4da;

      --shadow-sm: 0 2px 4px rgba(0,0,0,0.07);
      --shadow-md: 0 4px 8px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 20px rgba(0,0,0,0.12);

      --body-bg: #f4f7f6;
    }

    /*────────────────────────────────────────────────────────────────────────
      Global Resets
    ────────────────────────────────────────────────────────────────────────*/
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background-color: var(--body-bg);
      color: var(--dark);
      line-height: 1.6;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /*────────────────────────────────────────────────────────────────────────
      Header
    ────────────────────────────────────────────────────────────────────────*/
    header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 20px 0;
      box-shadow: var(--shadow-md);
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 3px solid var(--primary-darker);
    }
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .logo i { font-size: 2rem; }
    .logo h1 {
      font-size: 1.8rem;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    .date-display {
      font-size: 1.1rem;
      background: rgba(255,255,255,0.15);
      padding: 8px 18px;
      border-radius: 25px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1) inset;
    }

    /*────────────────────────────────────────────────────────────────────────
      Layout
    ────────────────────────────────────────────────────────────────────────*/
    .main-layout {
      display: grid;
      grid-template-columns: 1fr 3fr;
      gap: 25px;
      margin-top: 25px;
    }
    .sidebar {
      background: white;
      border-radius: 10px;
      box-shadow: var(--shadow-md);
      padding: 20px;
      height: fit-content;
      border-top: 4px solid var(--primary);
    }
    .nav-item {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      border-radius: 8px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.25s ease-in-out;
      color: var(--dark);
    }
    .nav-item:hover {
      background-color: var(--primary);
      color: white;
      transform: translateX(8px) scale(1.02);
      box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3);
    }
    .nav-item.active {
      background-color: var(--primary-darker);
      color: white;
      font-weight: 600;
      transform: translateX(8px) scale(1.02);
      box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3);
    }
    .nav-item i {
      margin-right: 12px;
      width: 22px;
      text-align: center;
      transition: transform 0.2s ease;
    }
    .nav-item:hover i,
    .nav-item.active i { transform: scale(1.1); }

    .content {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    /*────────────────────────────────────────────────────────────────────────
      Cards
    ────────────────────────────────────────────────────────────────────────*/
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow-md);
      padding: 25px;
      transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    .card-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--secondary);
    }

    /*────────────────────────────────────────────────────────────────────────
      Dashboard Stats (Assignments)
    ────────────────────────────────────────────────────────────────────────*/
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    .stat-card {
      background: linear-gradient(145deg, #eef2ff, #d7e3ff);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
    }
    .stat-card:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--primary);
      background: linear-gradient(145deg, var(--primary), var(--success));
      color: white;
    }
    .stat-value {
      font-size: 2.8rem;
      font-weight: 700;
      color: var(--primary-darker);
      margin: 10px 0;
      transition: color 0.3s ease;
    }
    .stat-card:hover .stat-value { color: white; }
    .stat-label {
      color: var(--gray);
      font-size: 0.95rem;
      transition: color 0.3s ease;
    }
    .stat-card:hover .stat-label { color: white; }

    /*────────────────────────────────────────────────────────────────────────
      Form Inputs
    ────────────────────────────────────────────────────────────────────────*/
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      background-color: var(--light);
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.25);
    }

    /*────────────────────────────────────────────────────────────────────────
      Buttons
    ────────────────────────────────────────────────────────────────────────*/
    .btn {
      display: inline-block;
      padding: 12px 28px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease-out;
      box-shadow: var(--shadow-sm);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .btn:hover {
      background: var(--primary-darker);
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-md);
    }
    .btn:active {
      transform: translateY(-1px) scale(0.98);
      box-shadow: var(--shadow-sm);
    }
    .btn-block { display: block; width: 100%; }
    .btn-danger { background-color: #dc3545; }
    .btn-danger:hover { background-color: #c82333; }

    /*────────────────────────────────────────────────────────────────────────
      Timer Display (for study sessions)
    ────────────────────────────────────────────────────────────────────────*/
    .timer-controls {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    .timer-display {
      font-size: 2.2rem;
      text-align: center;
      margin: 25px 0;
      font-family: monospace;
      background: linear-gradient(135deg, var(--light-gray), #ffffff);
      padding: 20px;
      border-radius: 10px;
      color: var(--secondary-darker);
      box-shadow: var(--shadow-sm) inset;
    }

    /*────────────────────────────────────────────────────────────────────────
      Task / Assignment List
    ────────────────────────────────────────────────────────────────────────*/
    .task-list { list-style: none; margin-top: 15px; }
    .task-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 15px;
      border-bottom: 1px solid var(--border);
      transition: all 0.25s ease-in-out;
      border-left: 4px solid transparent;
      background-color: white;
    }
    .task-item:last-child { border-bottom: none; }
    .task-item:hover {
      background-color: #f8faff;
      transform: translateX(5px);
      box-shadow: var(--shadow-sm);
      border-left-color: var(--primary);
    }
    .task-item.overdue {
      border-left-color: #dc3545;
      background-color: rgba(220,53,69,0.1);
    }
    .task-info { flex: 1; }
    .task-name {
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 6px;
    }
    .task-meta {
      display: flex;
      gap: 12px;
      color: var(--gray);
      font-size: 0.85rem;
    }
    .task-actions {
      display: flex;
      gap: 10px;
    }
    .action-btn {
      background: none;
      border: none;
      color: var(--gray);
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.2s ease;
      padding: 8px;
      border-radius: 50%;
    }
    .action-btn:hover {
      color: var(--primary-darker);
      background-color: rgba(var(--primary-rgb),0.15);
      transform: scale(1.15);
    }
    .task-actions .action-btn:last-child:hover {
      color: var(--accent);
      background-color: rgba(var(--accent-rgb),0.1);
    }

    /*────────────────────────────────────────────────────────────────────────
      Badges: Category & Priority
    ────────────────────────────────────────────────────────────────────────*/
    .category-badge,
    .priority-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
      margin-right: 6px;
    }
    .category-Assignment    { background: var(--secondary); color: white; }
    .category-PPT           { background: var(--primary);   color: white; }
    .category-Case\ Study   { background: var(--accent);    color: white; }
    .category-Reading       { background: var(--gray);      color: white; }
    .category-Other         { background: var(--light-gray);color: var(--dark); }

    .priority-High   { background: #dc3545; color: white; }
    .priority-Medium { background: #fd7e14; color: white; }
    .priority-Low    { background: #198754; color: white; }

    /*────────────────────────────────────────────────────────────────────────
      Upcoming Deadlines Card
    ────────────────────────────────────────────────────────────────────────*/
    #upcoming-deadlines .task-item {
      border-left-color: var(--success);
    }

    /*────────────────────────────────────────────────────────────────────────
      Responsive
    ────────────────────────────────────────────────────────────────────────*/
    @media (max-width: 768px) {
      .main-layout { grid-template-columns: 1fr; }
      .stats-container { grid-template-columns: 1fr; }
      .header-content { flex-direction: column; gap: 10px; }
      .logo h1 { font-size: 1.5rem; }
      .timer-controls { flex-direction: column; }
      .timer-controls .btn { width: 100%; }
    }
  </style>



  <!-- HEADER -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <i class="fas fa-graduation-cap"></i>
          <h1>Assignment Tracker</h1>
        </div>
        <div class="date-display" id="current-date">Monday, June 2, 2025</div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="main-layout">

      <!-- SIDEBAR NAV -->
      <div class="sidebar">
        <div class="nav-item" data-target="dashboard">
          <i class="fas fa-chart-line"></i><span>Dashboard</span>
        </div>
        <div class="nav-item" data-target="log-item">
          <i class="fas fa-plus-circle"></i><span>Log Item</span>
        </div>
        <div class="nav-item" data-target="history">
          <i class="fas fa-list-check"></i><span>History</span>
        </div>
        <div class="nav-item" data-target="reports">
          <i class="fas fa-chart-pie"></i><span>Reports</span>
        </div>
        <div class="nav-item" data-target="settings">
          <i class="fas fa-cog"></i><span>Settings</span>
        </div>
      </div>

      <!-- MAIN CONTENT -->
      <div class="content">

        <!-- DASHBOARD -->
        <section id="dashboard" class="content-section hidden">
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Overview</h2>
            </div>
            <div class="stats-container">
              <div class="stat-card">
                <div class="stat-value" id="due-count">4</div>
                <div class="stat-label">Due Soon</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="completed-count">0</div>
                <div class="stat-label">Completed</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="overdue-count">0</div>
                <div class="stat-label">Overdue</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="avg-completion">—</div>
                <div class="stat-label">Avg. Completion</div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Upcoming Deadlines</h2>
            </div>
            <ul class="task-list" id="upcoming-deadlines"><li class="task-item">
          <div class="task-info">
            <div class="task-name">Case Study: Zara</div>
            <div class="task-meta">
              <span>Jun 2, 2025</span>
              <span class="priority-badge priority-Low">Low</span>
            </div>
            <div>
              <span class="category-badge category-Case Study">Case Study</span>
              
            </div>
          </div>
          <div class="task-actions">
            <button class="action-btn"><i class="fas fa-edit"></i></button>
            <button class="action-btn"><i class="fas fa-trash"></i></button>
          </div>
        </li><li class="task-item">
          <div class="task-info">
            <div class="task-name">Finance Assignment</div>
            <div class="task-meta">
              <span>Jun 5, 2025</span>
              <span class="priority-badge priority-High">High</span>
            </div>
            <div>
              <span class="category-badge category-Assignment">Assignment</span>
              
            </div>
          </div>
          <div class="task-actions">
            <button class="action-btn"><i class="fas fa-edit"></i></button>
            <button class="action-btn"><i class="fas fa-trash"></i></button>
          </div>
        </li><li class="task-item">
          <div class="task-info">
            <div class="task-name">Marketing PPT</div>
            <div class="task-meta">
              <span>Jun 8, 2025</span>
              <span class="priority-badge priority-Medium">Medium</span>
            </div>
            <div>
              <span class="category-badge category-PPT">PPT</span>
              
            </div>
          </div>
          <div class="task-actions">
            <button class="action-btn"><i class="fas fa-edit"></i></button>
            <button class="action-btn"><i class="fas fa-trash"></i></button>
          </div>
        </li><li class="task-item">
          <div class="task-info">
            <div class="task-name">msm</div>
            <div class="task-meta">
              <span>Jun 12, 2025</span>
              <span class="priority-badge priority-High">High</span>
            </div>
            <div>
              <span class="category-badge category-Assignment">Assignment</span>
              <a href="https://www.google.com/search?q=7%24+in+inr&amp;sca_esv=f6bc877b3d7fa12d&amp;rlz=1C1RXQR_enIN1161IN1161&amp;sxsrf=AE3TifOwvPye_HVjR1YCWuYssm3cJQyo8A%3A1748848021180&amp;ei=lU09aPHrCrCM4-EPkafUuAE&amp;ved=0ahUKEwixisbIltKNAxUwxjgGHZETFRcQ4dUDCBA&amp;uact=5&amp;oq=7%24+in+inr&amp;gs_lp=Egxnd3Mtd2l6LXNlcnAiCTckIGluIGlucjILEAAYgAQYkQIYigUyBhAAGAcYHjIGEAAYBxgeMgYQABgHGB4yBhAAGAcYHjIGEAAYBxgeMgYQABgHGB4yBhAAGAcYHjIGEAAYBxgeMgYQABgHGB5I1hBQ0wRYlAhwAXgBkAEAmAGeAaABsQKqAQMwLjK4AQPIAQD4AQGYAgOgAskCwgIKEAAYsAMY1gQYR5gDAIgGAZAGCJIHAzEuMqAHrQmyBwMwLjK4B8UCwgcFMi0yLjHIBxU&amp;sclient=gws-wiz-serp" target="_blank"><i class="fas fa-link"></i></a>
            </div>
          </div>
          <div class="task-actions">
            <button class="action-btn"><i class="fas fa-edit"></i></button>
            <button class="action-btn"><i class="fas fa-trash"></i></button>
          </div>
        </li></ul>
          </div>
        </section>

        <!-- LOG NEW ITEM -->
        <section id="log-item" class="content-section hidden">
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Log New Item</h2>
            </div>
            <form id="item-form">
              <div class="form-group">
                <label for="item-title">Title</label>
                <input type="text" id="item-title" placeholder="Ex: Market Analysis Assignment" required="">
              </div>
              <div class="form-group">
                <label for="category">Category</label>
                <select id="category" required="">
                  <option value="">Select category</option>
                  <option>Assignment</option>
                  <option>PPT</option>
                  <option>Case Study</option>
                  <option>Reading</option>
                  <option>Other</option>
                </select>
              </div>
              <div class="form-group">
                <label for="due-date">Due Date</label>
                <input type="date" id="due-date" required="">
              </div>
              <div class="form-group">
                <label for="priority">Priority</label>
                <select id="priority">
                  <option>Low</option>
                  <option selected="">Medium</option>
                  <option>High</option>
                </select>
              </div>
              <div class="form-group">
                <label for="resource-link">Resource Link (optional)</label>
                <input type="url" id="resource-link" placeholder="https://drive.google.com/...">
              </div>
              <div class="form-group">
                <label for="notes">Details / Notes</label>
                <textarea id="notes" rows="3" placeholder="Any extra info…"></textarea>
              </div>
              <button type="submit" class="btn btn-block">Save Item</button>
            </form>
          </div>

          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Study Timer</h2>
            </div>
            <div class="timer-display" id="timer-display">00:00:00</div>
            <div class="timer-controls">
              <button class="btn btn-success" id="start-timer"><i class="fas fa-play"></i> Start</button>
              <button class="btn" id="pause-timer"><i class="fas fa-pause"></i> Pause</button>
              <button class="btn" id="reset-timer"><i class="fas fa-redo"></i> Reset</button>
              <button class="btn" id="log-timer"><i class="fas fa-save"></i> Log Time</button>
            </div>
          </div>
        </section>

        <!-- HISTORY -->
        <section id="history" class="content-section hidden">
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">History</h2>
            </div>
            <ul class="task-list" id="history-list">
              <!-- Populated by JS -->
            </ul>
          </div>
        </section>

        <!-- REPORTS -->
        <section id="reports" class="content-section hidden">
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Deadline Chart</h2>
            </div>
            <div class="chart-container">
              <canvas id="deadline-chart"></canvas>
            </div>
          </div>
        </section>

        <!-- SETTINGS -->
        <section id="settings" class="content-section">
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Settings</h2>
            </div>
            <div class="form-group">
              <label>Daily Study Goal (hours)</label>
              <input type="number" min="1" max="24" value="3">
            </div>
            <div class="form-group">
              <label>Study Hours Window</label>
              <div style="display:flex; gap:10px;">
                <input type="time" value="09:00"><span>to</span><input type="time" value="17:00">
              </div>
            </div>
            <div class="form-group">
              <label>Data Management</label>
              <div style="display:flex; gap:10px; margin-top:10px;">
                <button class="btn">Export Data</button>
                <button class="btn">Import Data</button>
                <button class="btn btn-danger">Reset All</button>
              </div>
            </div>
            <button class="btn btn-block">Save Settings</button>
          </div>
        </section>

      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // ────────────────────────────────────────────────────────────────────────
    // Date Display
    // ────────────────────────────────────────────────────────────────────────
    const now = new Date();
    document.getElementById('current-date').textContent =
      now.toLocaleDateString('en-US', {
        weekday:'long', year:'numeric', month:'long', day:'numeric'
      });

    // ────────────────────────────────────────────────────────────────────────
    // Navigation
    // ────────────────────────────────────────────────────────────────────────
    const navItems = document.querySelectorAll('.nav-item');
    const sections = document.querySelectorAll('.content-section');
    navItems.forEach(item =>
      item.addEventListener('click', () => {
        const tgt = item.dataset.target;
        navItems.forEach(n=>n.classList.remove('active'));
        item.classList.add('active');
        sections.forEach(s => {
          s.id === tgt ? s.classList.remove('hidden') : s.classList.add('hidden');
        });
      })
    );

    // ────────────────────────────────────────────────────────────────────────
    // Storage Arrays
    // ────────────────────────────────────────────────────────────────────────
    const upcoming = [];
    const historyArr = [];

    // ────────────────────────────────────────────────────────────────────────
    // UTIL: Format YYYY-MM-DD → readable
    // ────────────────────────────────────────────────────────────────────────
    function fmtDate(iso) {
      return new Date(iso).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});
    }

    // ────────────────────────────────────────────────────────────────────────
    // Add to Upcoming List & Stats
    // ────────────────────────────────────────────────────────────────────────
    function renderUpcoming() {
      const ul = document.getElementById('upcoming-deadlines');
      ul.innerHTML = '';
      const today = new Date().toISOString().slice(0,10);
      let overdueCount = 0;
      upcoming.sort((a,b)=> a.due.localeCompare(b.due));
      upcoming.forEach(item => {
        const li = document.createElement('li');
        li.className = 'task-item' + (item.due < today ? ' overdue':'');
        if(item.due < today) overdueCount++;
        li.innerHTML = `
          <div class="task-info">
            <div class="task-name">${item.title}</div>
            <div class="task-meta">
              <span>${fmtDate(item.due)}</span>
              <span class="priority-badge priority-${item.priority}">${item.priority}</span>
            </div>
            <div>
              <span class="category-badge category-${item.category}">${item.category}</span>
              ${item.link ? `<a href="${item.link}" target="_blank"><i class="fas fa-link"></i></a>` : ''}
            </div>
          </div>
          <div class="task-actions">
            <button class="action-btn"><i class="fas fa-edit"></i></button>
            <button class="action-btn"><i class="fas fa-trash"></i></button>
          </div>
        `;
        ul.appendChild(li);
      });
      // Update stats
      document.getElementById('due-count').textContent = upcoming.filter(i=>i.due >= today).length;
      document.getElementById('overdue-count').textContent = overdueCount;
    }

    // ────────────────────────────────────────────────────────────────────────
    // Add to History
    // ────────────────────────────────────────────────────────────────────────
    function renderHistory() {
      const ul = document.getElementById('history-list');
      ul.innerHTML = '';
      historyArr.forEach(item => {
        const li = document.createElement('li');
        li.className = 'task-item';
        li.innerHTML = `
          <div class="task-info">
            <div class="task-name">${item.title}</div>
            <div class="task-meta">
              <span>${fmtDate(item.due)}</span>
              <span class="priority-badge priority-${item.priority}">${item.priority}</span>
            </div>
            <div>
              <span class="category-badge category-${item.category}">${item.category}</span>
              ${item.link ? `<a href="${item.link}" target="_blank"><i class="fas fa-link"></i></a>` : ''}
            </div>
          </div>
          <div class="task-actions">
            <button class="action-btn"><i class="fas fa-trash"></i></button>
          </div>
        `;
        ul.appendChild(li);
      });
      document.getElementById('completed-count').textContent = historyArr.length;
    }

    // ────────────────────────────────────────────────────────────────────────
    // Form Submission: Log New Item
    // ────────────────────────────────────────────────────────────────────────
    document.getElementById('item-form').addEventListener('submit', e => {
      e.preventDefault();
      const itm = {
        title: document.getElementById('item-title').value,
        category: document.getElementById('category').value,
        due: document.getElementById('due-date').value,
        priority: document.getElementById('priority').value,
        link: document.getElementById('resource-link').value,
        notes: document.getElementById('notes').value
      };
      upcoming.push(itm);
      renderUpcoming();
      alert(`Logged: ${itm.title}`);
      e.target.reset();
      document.getElementById('category').focus();
    });

    // ────────────────────────────────────────────────────────────────────────
    // Timer Logic (unchanged)
    // ────────────────────────────────────────────────────────────────────────
    let timerInterval, seconds=0, isRunning=false;
    const disp = document.getElementById('timer-display');
    const upd = () => {
      const h = String(Math.floor(seconds/3600)).padStart(2,'0');
      const m = String(Math.floor((seconds%3600)/60)).padStart(2,'0');
      const s = String(seconds%60).padStart(2,'0');
      disp.textContent = `${h}:${m}:${s}`;
    };
    document.getElementById('start-timer').onclick = ()=>{
      if(!isRunning){
        isRunning=true;
        timerInterval = setInterval(()=>{
          seconds++; upd();
        },1000);
      }
    };
    document.getElementById('pause-timer').onclick = ()=>{
      if(isRunning){ isRunning=false; clearInterval(timerInterval); }
    };
    document.getElementById('reset-timer').onclick = ()=>{
      isRunning=false; clearInterval(timerInterval);
      seconds=0; upd();
    };
    document.getElementById('log-timer').onclick = ()=>{
      const mins = Math.round(seconds/60);
      if(mins>0){
        alert(`You studied ${mins} min. Great job!`);
        seconds=0; upd();
        isRunning=false; clearInterval(timerInterval);
      } else {
        alert('Run the timer for at least a minute.');
      }
    };
    upd();

    // ────────────────────────────────────────────────────────────────────────
    // Sample Data (optional startup examples)
    // ────────────────────────────────────────────────────────────────────────
    const samples = [
      {title:'Finance Assignment',category:'Assignment',due:'2025-06-05',priority:'High',link:'',notes:''},
      {title:'Marketing PPT',category:'PPT',due:'2025-06-08',priority:'Medium',link:'',notes:''},
      {title:'Case Study: Zara',category:'Case Study',due:'2025-06-02',priority:'Low',link:'',notes:''}
    ];
    samples.forEach(s=>upcoming.push(s));
    renderUpcoming();

    // ────────────────────────────────────────────────────────────────────────
    // Drag Over / Delete handlers could go here…
    // ────────────────────────────────────────────────────────────────────────

  });
  </script>




    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Task Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #007bff; /* Professional Blue */
            --primary-darker: #0056b3;
            --primary-rgb: 0, 123, 255;

            --secondary: #6c757d; /* Neutral Gray */
            --secondary-darker: #545b62;
            --secondary-rgb: 108, 117, 125;

            --success: #28a745; /* Green for success/completion */
            --success-darker: #1e7e34;

            --warning: #ffc107; /* Yellow for due soon/priority */
            --info: #17a2b8;    /* Teal for info */
            --danger: #dc3545;   /* Red for overdue/urgent */

            --accent: #fd7e14; /* Orange - can be used for high priority */
            --accent-rgb: 253, 126, 20;


            --light: #f8f9fa;
            --dark: #212529;
            --gray: #5f6770;
            --light-gray: #e9ecef;
            --border: #ced4da;

            --shadow-sm: 0 2px 4px rgba(0,0,0,0.07);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 20px rgba(0,0,0,0.12);

            --body-bg: #f4f7f6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--body-bg);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-darker));
            color: white;
            padding: 20px 0;
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 3px solid var(--primary-darker);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.2rem; /* Slightly larger icon */
        }
        
        .logo h1 {
            font-size: 1.9rem; /* Slightly larger title */
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .date-display {
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 18px;
            border-radius: 25px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) inset;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr; /* Wider sidebar */
            gap: 25px;
            margin-top: 25px;
        }
        
        .sidebar {
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow-md);
            padding: 20px;
            height: fit-content;
            border-top: 4px solid var(--primary);
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 13px 18px; /* More padding */
            border-radius: 8px;
            margin-bottom: 10px; /* Increased margin */
            cursor: pointer;
            transition: all 0.25s ease-in-out;
            color: var(--dark);
            font-size: 1.05rem; /* Slightly larger font */
        }
        
        .nav-item:hover {
            background-color: var(--light-gray);
            color: var(--primary-darker);
            transform: translateX(5px);
        }
        .nav-item.active {
            background-color: var(--primary);
            color: white;
            font-weight: 600;
            transform: translateX(5px);
            box-shadow: 0 3px 8px rgba(var(--primary-rgb), 0.3);
        }
        
        .nav-item i {
            margin-right: 15px; /* More space for icon */
            width: 24px; /* Wider icon area */
            text-align: center;
            transition: transform 0.2s ease;
        }
        .nav-item:hover i, .nav-item.active i {
            transform: scale(1.1);
        }
        
        .content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            padding: 25px;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .card-title {
            font-size: 1.6rem; /* Larger title */
            font-weight: 600; /* Medium bold */
            color: var(--primary-darker);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Wider stat cards */
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: linear-gradient(145deg, #eef2ff, #d9e2ff);
            border-radius: 12px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .stat-card:hover {
            transform: translateY(-6px) scale(1.03);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
            background: linear-gradient(145deg, var(--primary), var(--info));
            color: white;
        }
         .stat-card:hover .stat-value,
         .stat-card:hover .stat-label {
            color: white;
        }
        
        .stat-value {
            font-size: 2.5rem; /* Adjusted size */
            font-weight: 700;
            color: var(--primary-darker);
            margin: 10px 0;
            transition: color 0.3s ease;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 0.95rem;
            transition: color 0.3s ease;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: #fdfdff; /* Slightly brighter input background */
        }
        input[type="date"] {
            appearance: none; /* Better control over styling */
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.25);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 28px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease-out;
            box-shadow: var(--shadow-sm);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn:hover {
            background: var(--primary-darker);
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-md);
        }
        .btn:active {
            transform: translateY(-1px) scale(0.98);
            box-shadow: var(--shadow-sm);
        }
        
        .btn-block { display: block; width: 100%; }
        .btn-success { background-color: var(--success); }
        .btn-success:hover { background-color: var(--success-darker); }
        .btn-info { background-color: var(--info); }
        .btn-info:hover { background-color: var(--info-darker); }
        .btn-danger { background-color: var(--danger); }
        .btn-danger:hover { background-color: #c82333; }


        .timer-controls { display: flex; gap: 10px; margin-top: 15px; }
        
        .timer-display {
            font-size: 2.2rem;
            text-align: center;
            margin: 25px 0;
            font-family: 'Courier New', Courier, monospace;
            background: linear-gradient(135deg, var(--light-gray), #ffffff);
            padding: 20px;
            border-radius: 10px;
            color: var(--secondary-darker);
            box-shadow: var(--shadow-sm) inset;
        }
        
        .task-list { list-style: none; margin-top: 15px; }
        
        .task-item {
            display: flex;
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
            justify-content: space-between;
            align-items: center;
            padding: 18px 15px;
            border-bottom: 1px solid var(--border);
            transition: all 0.25s ease-in-out;
            background-color: white;
            border-left: 4px solid transparent;
        }
        .task-item:last-child { border-bottom: none; }
        
        .task-item:hover {
            background-color: #f8faff;
            transform: translateX(5px);
            box-shadow: var(--shadow-sm);
            border-left-color: var(--primary);
        }
        
        .task-info { flex: 1; min-width: 200px; margin-right: 15px; }
        .task-name { font-weight: 600; color: var(--dark); margin-bottom: 6px; font-size: 1.1rem; }
        
        .task-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px 20px; /* Row and column gap */
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 8px;
        }
        .task-meta span { display: inline-flex; align-items: center; }
        .task-meta i { margin-right: 5px; color: var(--secondary); }
        
        .due-date, .task-priority, .task-status { font-weight: 500; }
        .due-date.urgent { color: var(--danger); }
        .due-date.soon { color: var(--warning); }
        .task-priority.high { color: var(--accent); }
        .task-priority.medium { color: var(--info); }

        .time-spent {
            font-weight: 600;
            color: var(--primary);
            background-color: rgba(var(--primary-rgb), 0.1);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .task-actions { display: flex; gap: 10px; align-items: center; }
        
        .action-btn {
            background: none; border: none; color: var(--gray);
            cursor: pointer; font-size: 1.1rem; /* Slightly smaller for compactness */
            transition: all 0.2s ease; padding: 8px; border-radius: 50%;
        }
        .action-btn:hover {
            background-color: rgba(var(--primary-rgb), 0.1);
            transform: scale(1.1);
        }
        .action-btn.delete:hover { color: var(--danger); background-color: rgba(220, 53, 69, 0.1); }
        .action-btn.complete:hover { color: var(--success); background-color: rgba(40, 167, 69, 0.1); }
        
        .chart-container { height: 300px; margin-top: 20px; }
        
        .course-badge {
            display: inline-block; padding: 4px 12px; border-radius: 20px;
            background: var(--light-gray); font-size: 0.8rem; font-weight: 500;
            color: var(--gray); transition: all 0.2s ease;
        }
        .course-badge:hover {
            background-color: var(--secondary); color: white;
            transform: scale(1.05); box-shadow: 0 2px 5px rgba(var(--secondary-rgb), 0.3);
        }
        
        .hidden { display: none; }
        
        @media (max-width: 992px) { /* Adjusted breakpoint */
            .main-layout { grid-template-columns: 1fr; }
            .sidebar { margin-bottom: 20px; }
        }
        @media (max-width: 768px) {
            .stats-container { grid-template-columns: 1fr; }
            .header-content { flex-direction: column; gap: 10px; }
            .logo h1 { font-size: 1.7rem; }
            .timer-controls { flex-direction: column; }
            .timer-controls .btn { width: 100%; }
            .task-meta { flex-direction: column; align-items: flex-start; gap: 5px; }
        }
    </style>


    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i> <!--Graduation Cap Icon-->
                    <h1>Student Task Manager</h1>
                </div>
                <div class="date-display" id="current-date"></div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="main-layout">
            <div class="sidebar">
                <div class="nav-item" data-target="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-target="add-assignment">
                    <i class="fas fa-plus-square"></i> <!-- Changed Icon -->
                    <span>Add Assignment/Task</span>
                </div>
                <div class="nav-item" data-target="assignments">
                    <i class="fas fa-tasks"></i> <!-- Changed Icon -->
                    <span>All Tasks</span>
                </div>
                <div class="nav-item" data-target="courses">
                    <i class="fas fa-book-open"></i> <!-- Changed Icon -->
                    <span>Courses</span>
                </div>
                <div class="nav-item" data-target="reports">
                    <i class="fas fa-chart-bar"></i> <!-- Changed Icon -->
                    <span>Study Reports</span>
                </div>
                <div class="nav-item active" data-target="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>
            
            <div class="content">
                <!-- Dashboard Section -->
                <section id="dashboard" class="content-section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Academic Overview</h2>
                        </div>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-value" id="study-hours-today">1.5</div>
                                <div class="stat-label">Study Hours Today</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="assignments-due-soon">0</div>
                                <div class="stat-label">Tasks Due This Week</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="avg-study-session">90m</div>
                                <div class="stat-label">Avg. Study Session</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="completion-rate">100%</div>
                                <div class="stat-label">Task Completion Rate</div>
                            </div>
                        </div>
                        
                        <h3><i class="fas fa-calendar-check"></i> Upcoming Deadlines &amp; Recent Activity</h3>
                        <ul class="task-list" id="upcoming-assignments-list"><li><p style="text-align:center; padding:10px;">No pressing tasks. Relax or add some!</p></li></ul>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Weekly Study Focus</h2>
                        </div>
                        <div class="chart-container">
                            <canvas id="weekly-study-chart" style="display: block; box-sizing: border-box; height: 0px; width: 0px;" width="0" height="0"></canvas>
                        </div>
                    </div>
                </section>
                
                <!-- Add Assignment Section -->
                <section id="add-assignment" class="content-section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Add New Assignment or Study Task</h2>
                        </div>
                        
                        <form id="assignment-form">
                            <div class="form-group">
                                <label for="assignment-title"><i class="fas fa-pencil-alt"></i> Title / Description</label>
                                <input type="text" id="assignment-title" placeholder="e.g., Marketing Plan Presentation, Read Chapter 5" required="">
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="assignment-course"><i class="fas fa-book"></i> Course/Subject</label>
                                    <select id="assignment-course"><option value="">Select a course</option><option value="C1748857037717" style="color: rgb(81, 160, 245);">legal aspect (90)</option></select>
                                </div>
                                <div class="form-group">
                                    <label for="assignment-due-date"><i class="fas fa-calendar-alt"></i> Due Date</label>
                                    <input type="date" id="assignment-due-date">
                                </div>
                            </div>
                             <div class="form-grid">
                                <div class="form-group">
                                    <label for="assignment-type"><i class="fas fa-tags"></i> Type</label>
                                    <select id="assignment-type">
                                        <option value="Assignment">Assignment</option>
                                        <option value="PPT">Presentation (PPT)</option>
                                        <option value="Case Study">Case Study</option>
                                        <option value="Exam Prep">Exam Prep</option>
                                        <option value="Reading">Reading</option>
                                        <option value="Group Project">Group Project</option>
                                        <option value="Quiz">Quiz</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="assignment-priority"><i class="fas fa-exclamation-triangle"></i> Priority</label>
                                    <select id="assignment-priority">
                                        <option value="Low">Low</option>
                                        <option value="Medium" selected="">Medium</option>
                                        <option value="High">High</option>
                                    </select>
                                </div>
                            </div>
                             <div class="form-grid">
                                <div class="form-group">
                                    <label for="assignment-status"><i class="fas fa-check-circle"></i> Status</label>
                                    <select id="assignment-status">
                                        <option value="To Do" selected="">To Do</option>
                                        <option value="In Progress">In Progress</option>
                                        <option value="Submitted">Submitted</option>
                                        <option value="Graded">Graded</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="assignment-time-spent"><i class="fas fa-clock"></i> Time Spent (minutes, optional)</label>
                                    <input type="number" id="assignment-time-spent" min="0" placeholder="e.g., 60 for 1 hour">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="assignment-notes"><i class="fas fa-sticky-note"></i> Notes (optional)</label>
                                <textarea id="assignment-notes" rows="3" placeholder="Add any details, links, or reminders..."></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-success btn-block"><i class="fas fa-save"></i> Add Task</button>
                        </form>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-stopwatch"></i> Study Timer</h2>
                        </div>
                        <div class="timer-display" id="timer-display">00:00:00</div>
                        <div class="timer-controls">
                            <button class="btn btn-success" id="start-timer"><i class="fas fa-play"></i> Start</button>
                            <button class="btn btn-info" id="pause-timer"><i class="fas fa-pause"></i> Pause</button>
                            <button class="btn btn-danger" id="reset-timer"><i class="fas fa-redo"></i> Reset</button>
                            <button class="btn btn-primary" id="log-timer-time"><i class="fas fa-check-double"></i> Log Study Session</button>
                        </div>
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="timer-task-link">Link to existing task (optional):</label>
                            <select id="timer-task-link"><option value="">None - New Study Session</option></select>
                        </div>
                    </div>
                </section>
                
                <!-- All Assignments Section -->
                <section id="assignments" class="content-section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">All Assignments &amp; Tasks</h2>
                            <div>
                                <label for="assignment-filter-course" style="display:inline-block; margin-right:5px;">Filter by Course:</label>
                                <select id="assignment-filter-course" style="display:inline-block; width:auto; margin-right:15px;"><option value="">All Courses</option><option value="C1748857037717" style="color: rgb(81, 160, 245);">legal aspect (90)</option></select>
                                <label for="assignment-filter-status" style="display:inline-block; margin-right:5px;">Status:</label>
                                <select id="assignment-filter-status" style="display:inline-block; width:auto;">
                                    <option value="all">All Statuses</option>
                                    <option value="To Do">To Do</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Submitted">Submitted</option>
                                    <option value="Graded">Graded</option>
                                </select>
                            </div>
                        </div>
                        <ul class="task-list" id="all-assignments-list"><li class="task-item" data-id="A1748856998422">
                        <div class="task-info">
                            <div class="task-name">ba ana</div>
                            <div class="task-meta">
                                
                                <span><i class="fas fa-tags"></i> PPT</span>
                                <span class="due-date "><i class="fas fa-calendar-alt"></i> Due: Jun 11, 2025</span>
                                <span class="task-priority high"><i class="fas fa-exclamation-circle"></i> High</span>
                                <span class="task-status"><i class="fas fa-info-circle"></i> Submitted</span>
                                <span class="time-spent"><i class="fas fa-stopwatch"></i> 1h 30m</span>
                            </div>
                            <p style="font-size:0.85em; color:var(--gray); margin-top:5px;"><em>Notes: asdfghjkl</em></p>
                        </div>
                        <div class="task-actions">
                             
                            <button class="action-btn edit" title="Edit Task"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="Delete Task"><i class="fas fa-trash"></i></button>
                        </div>
                    </li><li class="task-item" data-id="A1748856999966">
                        <div class="task-info">
                            <div class="task-name"></div>
                            <div class="task-meta">
                                
                                <span><i class="fas fa-tags"></i> Assignment</span>
                                <span class="due-date "><i class="fas fa-calendar-alt"></i> Due: N/A</span>
                                <span class="task-priority medium"><i class="fas fa-exclamation-circle"></i> Medium</span>
                                <span class="task-status"><i class="fas fa-info-circle"></i> Submitted</span>
                                
                            </div>
                            
                        </div>
                        <div class="task-actions">
                             
                            <button class="action-btn edit" title="Edit Task"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="Delete Task"><i class="fas fa-trash"></i></button>
                        </div>
                    </li></ul>
                    </div>
                </section>

                <!-- Courses Section -->
                <section id="courses" class="content-section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Manage Courses</h2>
                        </div>
                        <form id="add-course-form" class="form-grid">
                            <div class="form-group">
                                <input type="text" id="new-course-name" placeholder="Enter new course name (e.g., Marketing 101)" required="">
                            </div>
                            <div class="form-group">
                                <input type="text" id="new-course-code" placeholder="Course Code (e.g., MKT101)">
                            </div>
                             <div class="form-group">
                                <input type="color" id="new-course-color" value="#007bff" title="Choose a color for this course">
                            </div>
                            <button type="submit" class="btn btn-success"><i class="fas fa-plus"></i> Add Course</button>
                        </form>
                        
                        <h3 style="margin-top: 25px; margin-bottom:10px;">My Courses</h3>
                        <ul class="task-list" id="course-list"><li class="task-item">
                        <div class="task-info">
                            <div class="task-name" style="color: #51a0f5;">legal aspect (90)</div>
                            <div class="task-meta">
                                <span><i class="fas fa-tasks"></i> 0 pending tasks</span>
                                <span><i class="fas fa-clock"></i> 0h 0m logged</span>
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="action-btn delete" data-id="C1748857037717"><i class="fas fa-trash"></i></button>
                        </div>
                    </li></ul>
                    </div>
                </section>
                
                <!-- Reports Section -->
                <section id="reports" class="content-section hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Study Analysis &amp; Time Distribution</h2>
                        </div>
                        <div class="form-grid">
                             <div class="chart-container" style="min-height: 350px;">
                                <canvas id="time-per-course-chart" style="display: block; box-sizing: border-box; height: 350px; width: 392px;" height="280" width="314"></canvas>
                                <p style="text-align:center; margin-top:5px;">Time Spent per Course</p>
                            </div>
                            <div class="chart-container" style="min-height: 350px;">
                                <canvas id="tasks-status-chart" style="display: block; box-sizing: border-box; height: 350px; width: 392px;" height="280" width="314"></canvas>
                                 <p style="text-align:center; margin-top:5px;">Task Status Overview</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Settings Section -->
                <section id="settings" class="content-section">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Settings</h2>
                        </div>
                        
                        <div class="form-group">
                            <label>Daily Study Goal (hours)</label>
                            <input type="number" min="0.5" max="12" step="0.5" value="3">
                        </div>
                        
                        <div class="form-group">
                            <label>Reminder for Due Tasks (days before)</label>
                            <input type="number" min="1" max="7" value="2">
                        </div>
                        
                        <div class="form-group">
                            <label>Data Management</label>
                            <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap:wrap;">
                                <button class="btn btn-info">Export Data</button>
                                <button class="btn btn-info">Import Data</button>
                                <button class="btn btn-danger">Clear All Data</button>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary btn-block">Save Settings</button>
                    </div>
                </section>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Student Task Manager JS
        document.addEventListener('DOMContentLoaded', function() {
            // --- DATA STORAGE (using localStorage for persistence) ---
            let courses = JSON.parse(localStorage.getItem('courses')) || [];
            let assignments = JSON.parse(localStorage.getItem('assignments')) || [];

            // --- DOM ELEMENTS ---
            const currentDateEl = document.getElementById('current-date');
            const navItems = document.querySelectorAll('.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            // Dashboard Stats
            const studyHoursTodayEl = document.getElementById('study-hours-today');
            const assignmentsDueSoonEl = document.getElementById('assignments-due-soon');
            const avgStudySessionEl = document.getElementById('avg-study-session');
            const completionRateEl = document.getElementById('completion-rate');
            const upcomingAssignmentsListEl = document.getElementById('upcoming-assignments-list');
            // Add Assignment Form
            const assignmentForm = document.getElementById('assignment-form');
            const assignmentTitleEl = document.getElementById('assignment-title');
            const assignmentCourseEl = document.getElementById('assignment-course');
            const assignmentDueDateEl = document.getElementById('assignment-due-date');
            const assignmentTypeEl = document.getElementById('assignment-type');
            const assignmentPriorityEl = document.getElementById('assignment-priority');
            const assignmentStatusEl = document.getElementById('assignment-status');
            const assignmentTimeSpentEl = document.getElementById('assignment-time-spent');
            const assignmentNotesEl = document.getElementById('assignment-notes');
            // All Assignments List
            const allAssignmentsListEl = document.getElementById('all-assignments-list');
            const assignmentFilterCourseEl = document.getElementById('assignment-filter-course');
            const assignmentFilterStatusEl = document.getElementById('assignment-filter-status');
            // Courses
            const addCourseForm = document.getElementById('add-course-form');
            const newCourseNameEl = document.getElementById('new-course-name');
            const newCourseCodeEl = document.getElementById('new-course-code');
            const newCourseColorEl = document.getElementById('new-course-color');
            const courseListEl = document.getElementById('course-list');
            // Timer
            const timerDisplayEl = document.getElementById('timer-display');
            const startTimerBtn = document.getElementById('start-timer');
            const pauseTimerBtn = document.getElementById('pause-timer');
            const resetTimerBtn = document.getElementById('reset-timer');
            const logTimerTimeBtn = document.getElementById('log-timer-time');
            const timerTaskLinkEl = document.getElementById('timer-task-link');
            // Charts
            let weeklyStudyChart, timePerCourseChart, tasksStatusChart;


            // --- UTILITY FUNCTIONS ---
            const saveCourses = () => localStorage.setItem('courses', JSON.stringify(courses));
            const saveAssignments = () => localStorage.setItem('assignments', JSON.stringify(assignments));
            
            const formatDate = (dateString) => {
                if (!dateString) return 'N/A';
                const date = new Date(dateString);
                 // Add a day to compensate for UTC conversion issues if dates appear off by one
                const adjustedDate = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());
                return adjustedDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            };

            const getCourseById = (id) => courses.find(course => course.id === id);
            const getCourseColor = (courseId) => {
                const course = getCourseById(courseId);
                return course ? course.color : '#6c757d'; // Default gray
            }

            // --- INITIALIZATION ---
            const init = () => {
                currentDateEl.textContent = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                setupEventListeners();
                populateCourseDropdowns();
                renderDashboard();
                renderAllAssignments();
                renderCourses();
                initCharts();
                // Set default view
                document.querySelector('.nav-item[data-target="dashboard"]').click();
            };

            // --- NAVIGATION ---
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    contentSections.forEach(section => {
                        section.classList.add('hidden');
                        if (section.id === target) {
                            section.classList.remove('hidden');
                        }
                    });
                    // Refresh charts if they are in the active section
                    if (target === 'dashboard' || target === 'reports') {
                        setTimeout(() => { // Ensure canvas is visible
                            if (weeklyStudyChart && typeof weeklyStudyChart.resize === 'function') weeklyStudyChart.resize();
                            if (timePerCourseChart && typeof timePerCourseChart.resize === 'function') timePerCourseChart.resize();
                            if (tasksStatusChart && typeof tasksStatusChart.resize === 'function') tasksStatusChart.resize();
                            updateChartData(); // update chart data when view changes
                        }, 0);
                    }
                });
            });

            // --- COURSE MANAGEMENT ---
            const populateCourseDropdowns = () => {
                const selects = [assignmentCourseEl, assignmentFilterCourseEl /*, potentially other dropdowns */];
                selects.forEach(select => {
                    if (!select) return;
                    const currentValue = select.value; // Preserve current selection if any
                    select.innerHTML = `<option value="">All Courses</option>`; // Default for filters
                    if (select.id === 'assignment-course') { // Specific for assignment form
                         select.innerHTML = `<option value="">Select a course</option>`;
                    }
                    courses.forEach(course => {
                        const option = document.createElement('option');
                        option.value = course.id;
                        option.textContent = `${course.name} (${course.code || ''})`;
                        option.style.color = course.color;
                        select.appendChild(option);
                    });
                    select.value = currentValue; // Restore selection
                });
                 // Populate timer task link dropdown
                timerTaskLinkEl.innerHTML = `<option value="">None - New Study Session</option>`;
                assignments.filter(a => a.status === "To Do" || a.status === "In Progress").forEach(a => {
                    const option = document.createElement('option');
                    option.value = a.id;
                    option.textContent = a.title;
                    timerTaskLinkEl.appendChild(option);
                });
            };

            const renderCourses = () => {
                courseListEl.innerHTML = '';
                if (courses.length === 0) {
                    courseListEl.innerHTML = '<p>No courses added yet. Add one above!</p>';
                    return;
                }
                courses.forEach(course => {
                    const li = document.createElement('li');
                    li.className = 'task-item'; // Re-using class for styling
                    const tasksInCourse = assignments.filter(a => a.courseId === course.id && a.status !== 'Graded' && a.status !== 'Submitted').length;
                    const totalTime = assignments.filter(a => a.courseId === course.id).reduce((sum, a) => sum + (a.timeSpent || 0), 0);

                    li.innerHTML = `
                        <div class="task-info">
                            <div class="task-name" style="color: ${course.color};">${course.name} (${course.code || 'N/A'})</div>
                            <div class="task-meta">
                                <span><i class="fas fa-tasks"></i> ${tasksInCourse} pending tasks</span>
                                <span><i class="fas fa-clock"></i> ${Math.floor(totalTime / 60)}h ${totalTime % 60}m logged</span>
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="action-btn delete" data-id="${course.id}"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    courseListEl.appendChild(li);
                });
                populateCourseDropdowns(); // Re-populate dropdowns incase courses changed
            };

            addCourseForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = newCourseNameEl.value.trim();
                const code = newCourseCodeEl.value.trim();
                const color = newCourseColorEl.value;
                if (name) {
                    courses.push({ id: `C${Date.now()}`, name, code, color });
                    saveCourses();
                    renderCourses();
                    addCourseForm.reset();
                    newCourseColorEl.value = "#007bff"; // Reset color picker
                }
            });

            courseListEl.addEventListener('click', (e) => {
                if (e.target.closest('.delete')) {
                    const courseId = e.target.closest('.delete').dataset.id;
                    if (confirm('Are you sure you want to delete this course and all its associated assignments? This cannot be undone.')) {
                        courses = courses.filter(c => c.id !== courseId);
                        assignments = assignments.filter(a => a.courseId !== courseId);
                        saveCourses();
                        saveAssignments();
                        renderCourses();
                        renderAllAssignments();
                        renderDashboard();
                    }
                }
            });

            // --- ASSIGNMENT MANAGEMENT ---
            assignmentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const newAssignment = {
                    id: `A${Date.now()}`,
                    title: assignmentTitleEl.value.trim(),
                    courseId: assignmentCourseEl.value,
                    dueDate: assignmentDueDateEl.value,
                    type: assignmentTypeEl.value,
                    priority: assignmentPriorityEl.value,
                    status: assignmentStatusEl.value,
                    timeSpent: parseInt(assignmentTimeSpentEl.value) || 0,
                    notes: assignmentNotesEl.value.trim(),
                    createdAt: new Date().toISOString()
                };
                assignments.push(newAssignment);
                saveAssignments();
                assignmentForm.reset();
                assignmentCourseEl.value = ""; // Ensure dropdown is reset
                renderDashboard();
                renderAllAssignments();
                populateCourseDropdowns(); // Update timer task link options
                alert('Assignment added successfully!');
                 // Switch to all assignments tab
                document.querySelector('.nav-item[data-target="assignments"]').click();
            });

            const renderAllAssignments = (filterCourseId = 'all', filterStatus = 'all') => {
                allAssignmentsListEl.innerHTML = '';
                let filteredAssignments = assignments;

                if (filterCourseId !== 'all') {
                    filteredAssignments = filteredAssignments.filter(a => a.courseId === filterCourseId);
                }
                if (filterStatus !== 'all') {
                    filteredAssignments = filteredAssignments.filter(a => a.status === filterStatus);
                }

                // Sort by due date (earliest first), then by priority
                filteredAssignments.sort((a, b) => {
                    if (a.dueDate && b.dueDate) {
                        const dateA = new Date(a.dueDate);
                        const dateB = new Date(b.dueDate);
                        if (dateA < dateB) return -1;
                        if (dateA > dateB) return 1;
                    } else if (a.dueDate) {
                        return -1; // Tasks with due dates first
                    } else if (b.dueDate) {
                        return 1;
                    }
                    // Fallback to priority if due dates are same or not present
                    const priorities = { "High": 1, "Medium": 2, "Low": 3 };
                    return (priorities[a.priority] || 3) - (priorities[b.priority] || 3);
                });


                if (filteredAssignments.length === 0) {
                    allAssignmentsListEl.innerHTML = '<li><p style="text-align:center; padding:20px;">No assignments match your filters. Try adding some!</p></li>';
                    return;
                }

                filteredAssignments.forEach(a => {
                    const course = getCourseById(a.courseId);
                    const li = document.createElement('li');
                    li.className = 'task-item';
                    li.dataset.id = a.id;

                    let dueDateClass = '';
                    if (a.dueDate) {
                        const today = new Date(); today.setHours(0,0,0,0);
                        const dueDate = new Date(a.dueDate);
                        const diffTime = dueDate - today;
                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                        if (diffDays < 0 && a.status !== 'Submitted' && a.status !== 'Graded') dueDateClass = 'urgent'; // Overdue
                        else if (diffDays >=0 && diffDays <= 3 && a.status !== 'Submitted' && a.status !== 'Graded') dueDateClass = 'soon'; // Due soon
                    }
                    
                    let priorityClass = a.priority.toLowerCase();

                    li.innerHTML = `
                        <div class="task-info">
                            <div class="task-name">${a.title}</div>
                            <div class="task-meta">
                                ${course ? `<span><i class="fas fa-book" style="color:${course.color || '#6c757d'};"></i> <strong class="course-badge" style="background-color:${course.color || '#eee'}; color:${isLight(course.color || '#eee') ? '#333' : '#fff'}">${course.name}</strong></span>` : ''}
                                <span><i class="fas fa-tags"></i> ${a.type}</span>
                                <span class="due-date ${dueDateClass}"><i class="fas fa-calendar-alt"></i> Due: ${formatDate(a.dueDate)}</span>
                                <span class="task-priority ${priorityClass}"><i class="fas fa-exclamation-circle"></i> ${a.priority}</span>
                                <span class="task-status"><i class="fas fa-info-circle"></i> ${a.status}</span>
                                ${a.timeSpent > 0 ? `<span class="time-spent"><i class="fas fa-stopwatch"></i> ${Math.floor(a.timeSpent / 60)}h ${a.timeSpent % 60}m</span>` : ''}
                            </div>
                            ${a.notes ? `<p style="font-size:0.85em; color:var(--gray); margin-top:5px;"><em>Notes: ${a.notes.substring(0,100)}${a.notes.length > 100 ? '...' : ''}</em></p>` : ''}
                        </div>
                        <div class="task-actions">
                             ${a.status !== 'Submitted' && a.status !== 'Graded' ? `<button class="action-btn complete" title="Mark as Submitted"><i class="fas fa-check-circle"></i></button>` : ''}
                            <button class="action-btn edit" title="Edit Task"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="Delete Task"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    allAssignmentsListEl.appendChild(li);
                    });
            };
            function isLight(color) { // Helper to determine if a color is light for text contrast
                if (!color) return true;
                const hex = color.replace('#', '');
                const c_r = parseInt(hex.substring(0, 0 + 2), 16);
                const c_g = parseInt(hex.substring(2, 2 + 2), 16);
                const c_b = parseInt(hex.substring(4, 4 + 2), 16);
                const brightness = ((c_r * 299) + (c_g * 587) + (c_b * 114)) / 1000;
                return brightness > 155;
            }

            assignmentFilterCourseEl.addEventListener('change', () => renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value));
            assignmentFilterStatusEl.addEventListener('change', () => renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value));
            
            allAssignmentsListEl.addEventListener('click', (e) => {
                const assignmentId = e.target.closest('.task-item')?.dataset.id;
                if (!assignmentId) return;

                const assignment = assignments.find(a => a.id === assignmentId);

                if (e.target.closest('.delete')) {
                    if (confirm('Are you sure you want to delete this assignment?')) {
                        assignments = assignments.filter(a => a.id !== assignmentId);
                        saveAssignments();
                        renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value);
                        renderDashboard();
                    }
                } else if (e.target.closest('.complete')) {
                    assignment.status = 'Submitted';
                     // You might want to add a submission date here: assignment.submittedAt = new Date().toISOString();
                    saveAssignments();
                    renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value);
                    renderDashboard();
                } else if (e.target.closest('.edit')) {
                    // Populate form and switch to "Add Assignment" tab for editing
                    assignmentTitleEl.value = assignment.title;
                    assignmentCourseEl.value = assignment.courseId;
                    assignmentDueDateEl.value = assignment.dueDate;
                    assignmentTypeEl.value = assignment.type;
                    assignmentPriorityEl.value = assignment.priority;
                    assignmentStatusEl.value = assignment.status;
                    assignmentTimeSpentEl.value = assignment.timeSpent;
                    assignmentNotesEl.value = assignment.notes;
                    
                    // Temporarily store ID for update logic
                    assignmentForm.dataset.editingId = assignment.id; 
                    
                    document.querySelector('.nav-item[data-target="add-assignment"]').click();
                    assignmentForm.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save"></i> Update Task';
                    // Make sure to handle the update in the form submit:
                    // if (assignmentForm.dataset.editingId) { ... update logic ... delete dataset.editingId }
                    // else { ... new assignment logic ... }
                }
            });
             // Modify assignmentForm submit listener for editing
            assignmentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const editingId = assignmentForm.dataset.editingId;
                const assignmentData = {
                    title: assignmentTitleEl.value.trim(),
                    courseId: assignmentCourseEl.value,
                    dueDate: assignmentDueDateEl.value,
                    type: assignmentTypeEl.value,
                    priority: assignmentPriorityEl.value,
                    status: assignmentStatusEl.value,
                    timeSpent: parseInt(assignmentTimeSpentEl.value) || 0,
                    notes: assignmentNotesEl.value.trim(),
                };

                if (editingId) {
                    const index = assignments.findIndex(a => a.id === editingId);
                    if (index > -1) {
                        assignments[index] = { ...assignments[index], ...assignmentData };
                    }
                    delete assignmentForm.dataset.editingId; // Clear editing state
                    assignmentForm.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save"></i> Add Task';
                     alert('Assignment updated successfully!');
                } else {
                    assignmentData.id = `A${Date.now()}`;
                    assignmentData.createdAt = new Date().toISOString();
                    assignments.push(assignmentData);
                     alert('Assignment added successfully!');
                }
                saveAssignments();
                assignmentForm.reset();
                assignmentCourseEl.value = "";
                renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value);
                renderDashboard();
                populateCourseDropdowns();
                document.querySelector('.nav-item[data-target="assignments"]').click(); // Go to all assignments
            });


            // --- DASHBOARD ---
            const renderDashboard = () => {
                // Study Hours Today
                const today = new Date().toISOString().slice(0, 10);
                const studyToday = assignments
                    .filter(a => (a.status === 'In Progress' || a.status === 'Submitted') && a.createdAt && a.createdAt.startsWith(today)) // Crude check for "today", better would be to track session dates
                    .reduce((sum, a) => sum + (a.timeSpent || 0), 0);
                studyHoursTodayEl.textContent = (studyToday / 60).toFixed(1);

                // Assignments Due This Week
                const oneWeekFromNow = new Date();
                oneWeekFromNow.setDate(oneWeekFromNow.getDate() + 7);
                const dueSoon = assignments.filter(a => {
                    if (!a.dueDate || a.status === 'Submitted' || a.status === 'Graded') return false;
                    const dueDate = new Date(a.dueDate);
                    return dueDate >= new Date() && dueDate <= oneWeekFromNow;
                }).length;
                assignmentsDueSoonEl.textContent = dueSoon;

                // Avg Study Session (based on tasks with time spent)
                const tasksWithTime = assignments.filter(a => a.timeSpent > 0);
                const totalTimeSpent = tasksWithTime.reduce((sum, a) => sum + a.timeSpent, 0);
                const avgSession = tasksWithTime.length > 0 ? Math.round(totalTimeSpent / tasksWithTime.length) : 0;
                avgStudySessionEl.textContent = `${avgSession}m`;

                // Completion Rate
                const completableTasks = assignments.filter(a => a.type !== 'Exam Prep' && a.type !== 'Reading').length; // Example: Exclude ongoing tasks
                const completedTasks = assignments.filter(a => a.status === 'Submitted' || a.status === 'Graded').length;
                completionRateEl.textContent = completableTasks > 0 ? `${Math.round((completedTasks / completableTasks) * 100)}%` : `0%`;

                // Upcoming Assignments List (Top 5 due soon or high priority)
                upcomingAssignmentsListEl.innerHTML = '';
                const upcoming = assignments
                    .filter(a => a.status === 'To Do' || a.status === 'In Progress')
                    .sort((a,b) => {
                        if (a.dueDate && b.dueDate) return new Date(a.dueDate) - new Date(b.dueDate);
                        if (a.dueDate) return -1; if (b.dueDate) return 1;
                        const priorities = { "High": 1, "Medium": 2, "Low": 3 };
                        return (priorities[a.priority] || 3) - (priorities[b.priority] || 3);
                    })
                    .slice(0, 5);

                if (upcoming.length === 0) {
                    upcomingAssignmentsListEl.innerHTML = '<li><p style="text-align:center; padding:10px;">No pressing tasks. Relax or add some!</p></li>';
                } else {
                    upcoming.forEach(a => {
                        const course = getCourseById(a.courseId);
                        const li = document.createElement('li');
                        li.className = 'task-item';
                         let dueDateClass = '';
                        if (a.dueDate) {
                            const todayDt = new Date(); todayDt.setHours(0,0,0,0);
                            const dueDt = new Date(a.dueDate);
                            const diffTime = dueDt - todayDt;
                            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                            if (diffDays < 0) dueDateClass = 'urgent';
                            else if (diffDays <= 3) dueDateClass = 'soon';
                        }
                        li.innerHTML = `
                            <div class="task-info">
                                <div class="task-name">${a.title}</div>
                                <div class="task-meta">
                                    ${course ? `<span><i class="fas fa-book" style="color:${course.color || '#6c757d'};"></i> ${course.name}</span>` : ''}
                                    <span class="due-date ${dueDateClass}"><i class="fas fa-calendar-alt"></i> ${formatDate(a.dueDate)}</span>
                                    <span class="task-priority ${a.priority.toLowerCase()}"><i class="fas fa-exclamation-circle"></i> ${a.priority}</span>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="action-btn quick-view" data-id="${a.id}" title="View Details"><i class="fas fa-eye"></i></button>
                            </div>
                        `;
                        upcomingAssignmentsListEl.appendChild(li);
                    });
                }
                 // Update chart data whenever dashboard is rendered
                if (weeklyStudyChart && typeof weeklyStudyChart.update === 'function') updateChartData();
            };
            
            upcomingAssignmentsListEl.addEventListener('click', e => {
                if (e.target.closest('.quick-view')) {
                    const assignmentId = e.target.closest('.quick-view').dataset.id;
                    // Find the assignment and show its details - for now, just log to console
                    // Or navigate to the "All Assignments" and filter/highlight it, or open a modal
                    const task = assignments.find(a => a.id === assignmentId);
                    if (task) {
                        alert(`Quick View:\nTitle: ${task.title}\nCourse: ${getCourseById(task.courseId)?.name || 'N/A'}\nDue: ${formatDate(task.dueDate)}\nPriority: ${task.priority}\nStatus: ${task.status}`);
                        // To make it navigate and select, you could do:
                        // assignmentFilterCourseEl.value = task.courseId || 'all';
                        // assignmentFilterStatusEl.value = task.status || 'all';
                        // renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value);
                        // document.querySelector('.nav-item[data-target="assignments"]').click();
                        // setTimeout(() => { // Scroll to element - more complex
                        //    const elToScroll = document.querySelector(`#all-assignments-list .task-item[data-id="${assignmentId}"]`);
                        //    elToScroll?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        //    elToScroll?.style.setProperty('background-color', 'var(--warning-light)', 'important'); // Highlight
                        // }, 200);
                    }
                }
            });

            // --- TIMER ---
            let timerInterval;
            let timerSeconds = 0;
            let isTimerRunning = false;

            const updateTimerDisplay = () => {
                const hrs = Math.floor(timerSeconds / 3600).toString().padStart(2, '0');
                const mins = Math.floor((timerSeconds % 3600) / 60).toString().padStart(2, '0');
                const secs = (timerSeconds % 60).toString().padStart(2, '0');
                timerDisplayEl.textContent = `${hrs}:${mins}:${secs}`;
            };
            startTimerBtn.addEventListener('click', () => {
                if (!isTimerRunning) {
                    isTimerRunning = true;
                    startTimerBtn.innerHTML = '<i class="fas fa-pause"></i> Pause'; // Change to Pause
                    startTimerBtn.classList.remove('btn-success');
                    startTimerBtn.classList.add('btn-info');

                    pauseTimerBtn.disabled = true; // Disable separate pause button effectively

                    timerInterval = setInterval(() => {
                        timerSeconds++;
                        updateTimerDisplay();
                    }, 1000);
                } else { // Acting as Pause
                    isTimerRunning = false;
                    clearInterval(timerInterval);
                    startTimerBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                    startTimerBtn.classList.remove('btn-info');
                    startTimerBtn.classList.add('btn-success');
                    pauseTimerBtn.disabled = true; // Keep it disabled as Start/Pause handles it
                }
            });
            // Make pause button effectively redundant if start button toggles
            pauseTimerBtn.addEventListener('click', () => { // This button can be removed if start acts as toggle
                if (isTimerRunning) {
                    isTimerRunning = false;
                    clearInterval(timerInterval);
                    startTimerBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                    startTimerBtn.classList.remove('btn-info');
                    startTimerBtn.classList.add('btn-success');
                }
            });
            resetTimerBtn.addEventListener('click', () => {
                isTimerRunning = false;
                clearInterval(timerInterval);
                timerSeconds = 0;
                updateTimerDisplay();
                startTimerBtn.innerHTML = '<i class="fas fa-play"></i> Start';
                startTimerBtn.classList.remove('btn-info');
                startTimerBtn.classList.add('btn-success');
                pauseTimerBtn.disabled = false; // Re-enable if it's a separate button
            });
            logTimerTimeBtn.addEventListener('click', () => {
                const minutes = Math.round(timerSeconds / 60);
                if (minutes > 0) {
                    const linkedTaskId = timerTaskLinkEl.value;
                    if (linkedTaskId) {
                        const assignment = assignments.find(a => a.id === linkedTaskId);
                        if (assignment) {
                            assignment.timeSpent = (assignment.timeSpent || 0) + minutes;
                            assignment.status = "In Progress"; // Default status update
                            saveAssignments();
                            alert(`Logged ${minutes} minutes to "${assignment.title}".`);
                        }
                    } else {
                        // Create a new "Study Session" task
                        const sessionTitle = prompt("Enter title for this study session:", `Study Session ${formatDate(new Date().toISOString())}`);
                        if (sessionTitle) {
                            const newStudySession = {
                                id: `A${Date.now()}`,
                                title: sessionTitle,
                                courseId: "", // Maybe ask for course?
                                dueDate: "",
                                type: "Study Session",
                                priority: "Low",
                                status: "In Progress", // Or "Completed"
                                timeSpent: minutes,
                                notes: "Logged via timer.",
                                createdAt: new Date().toISOString()
                            };
                            assignments.push(newStudySession);
                            saveAssignments();
                            alert(`Logged new study session: "${sessionTitle}" for ${minutes} minutes.`);
                        }
                    }
                    renderAllAssignments(assignmentFilterCourseEl.value, assignmentFilterStatusEl.value);
                    renderDashboard();
                    // Reset timer
                    isTimerRunning = false;
                    clearInterval(timerInterval);
                    timerSeconds = 0;
                    updateTimerDisplay();
                    startTimerBtn.innerHTML = '<i class="fas fa-play"></i> Start';
                } else {
                    alert('Please start the timer and log at least one minute.');
                }
            });

            // --- CHARTS ---
            const initCharts = () => {
                const commonOptions = {
                    responsive: true, maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true } },
                    plugins: { legend: { display: false } }
                };

                // Weekly Study Chart (Placeholder for now, needs data aggregation)
                const weeklyCtx = document.getElementById('weekly-study-chart')?.getContext('2d');
                if (weeklyCtx) {
                    weeklyStudyChart = new Chart(weeklyCtx, {
                        type: 'bar',
                        data: { labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], datasets: [{ label: 'Study Hours', data: [0,0,0,0,0,0,0], backgroundColor: 'rgba(0, 123, 255, 0.7)' }] },
                        options: {...commonOptions, plugins: { legend: {display:true, position:'top'}}, scales: {y:{title:{display:true, text:'Hours'}}}}
                    });
                }

                // Time Per Course Chart
                const timePerCourseCtx = document.getElementById('time-per-course-chart')?.getContext('2d');
                if (timePerCourseCtx) {
                    timePerCourseChart = new Chart(timePerCourseCtx, {
                        type: 'doughnut',
                        data: { labels: [], datasets: [{ data: [], backgroundColor: [] }] },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } }
                    });
                }

                // Tasks Status Chart
                const tasksStatusCtx = document.getElementById('tasks-status-chart')?.getContext('2d');
                if (tasksStatusCtx) {
                    tasksStatusChart = new Chart(tasksStatusCtx, {
                        type: 'pie',
                        data: { labels: ['To Do', 'In Progress', 'Submitted', 'Graded'], datasets: [{ data: [0,0,0,0], backgroundColor: ['#ffc107', '#17a2b8', '#6c757d', '#28a745'] }] },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } }
                    });
                }
                 updateChartData(); // Initial data load
            };

            const updateChartData = () => {
                // Weekly Study Data (Example: sum time spent per day for current week)
                if (weeklyStudyChart) {
                    const dailyHours = [0,0,0,0,0,0,0]; // Sun-Sat
                    const today = new Date();
                    const currentWeekStart = new Date(today.setDate(today.getDate() - today.getDay())); // Start of current week (Sunday)
                    
                    assignments.forEach(a => {
                        if (a.timeSpent > 0 && a.createdAt) { // Assuming createdAt for when time was logged. Better: specific session dates
                            const taskDate = new Date(a.createdAt);
                             // Check if taskDate is in the current week
                            if (taskDate >= currentWeekStart && taskDate < new Date(currentWeekStart).setDate(currentWeekStart.getDate() + 7)) {
                                dailyHours[taskDate.getDay()] += (a.timeSpent / 60);
                            }
                        }
                    });
                    weeklyStudyChart.data.datasets[0].data = dailyHours;
                    weeklyStudyChart.update();
                }

                // Time Per Course Data
                if (timePerCourseChart) {
                    const courseTime = {};
                    courses.forEach(c => courseTime[c.id] = {name: c.name, time: 0, color: c.color });
                    assignments.forEach(a => {
                        if (a.courseId && courseTime[a.courseId] && a.timeSpent > 0) {
                            courseTime[a.courseId].time += a.timeSpent;
                        }
                    });
                    timePerCourseChart.data.labels = Object.values(courseTime).map(c => c.name);
                    timePerCourseChart.data.datasets[0].data = Object.values(courseTime).map(c => c.time);
                    timePerCourseChart.data.datasets[0].backgroundColor = Object.values(courseTime).map(c => c.color || '#6c757d');
                    timePerCourseChart.update();
                }

                // Tasks Status Data
                if (tasksStatusChart) {
                    const statusCounts = { 'To Do': 0, 'In Progress': 0, 'Submitted': 0, 'Graded': 0 };
                    assignments.forEach(a => statusCounts[a.status] = (statusCounts[a.status] || 0) + 1);
                    tasksStatusChart.data.datasets[0].data = Object.values(statusCounts);
                    tasksStatusChart.update();
                }
            };
            
            // --- EVENT LISTENERS (Global & Settings) ---
            const setupEventListeners = () => {
                 // Settings save button (placeholder)
                const saveSettingsBtn = document.querySelector('#settings .btn-primary');
                saveSettingsBtn?.addEventListener('click', () => alert('Settings saved (feature not fully implemented).'));
                // Data Management buttons (placeholders)
                document.querySelector('#settings .btn-info:nth-of-type(1)')?.addEventListener('click', () => alert('Export Data (not implemented).'));
                document.querySelector('#settings .btn-info:nth-of-type(2)')?.addEventListener('click', () => alert('Import Data (not implemented).'));
                document.querySelector('#settings .btn-danger')?.addEventListener('click', () => {
                    if (confirm('ARE YOU SURE you want to clear ALL data? This cannot be undone.')) {
                        localStorage.clear();
                        courses = []; assignments = [];
                        init(); // Re-initialize the app
                        alert('All data cleared.');
                         document.querySelector('.nav-item[data-target="dashboard"]').click();
                    }
                });
            };


                    
            // --- START THE APP ---
            init();
        });
    </script>



            <script></script>
        
    
</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration>
